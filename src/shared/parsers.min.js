String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var englishStopWords=new Set([["i","me","my","myself","we","our","ours","ourselves","you","your","yours","yourself","yourselves","he","him","his","himself","she","her","hers","herself","it","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now"]]);const firstNonStopLowercase=e=>{let t=e.toLowerCase(),r=t.split(" ").map(e=>e.replace(/[^0-9a-z]/gi,"")),a=r.filter(e=>englishStopWords.has(e));return a.length>0?a[0]:r[0]},parseArxivBibtex=e=>{var t=$(e),r=[],a="";t.find("author name").each((e,t)=>{r.push($(t).text()),0===e&&(a+=$(t).text().split(" ")[$(t).text().split(" ").length-1].toLowerCase())});var n="";t.find("link").each((e,t)=>{const r=$(t).attr("href");r&&r.indexOf("arxiv.org/pdf/")>=0&&(n=r)});const s=r.join(" and "),i=$(t.find("entry title")[0]).text(),o=$(t.find("entry published")[0]).text().slice(0,4);let h;a+=o,a+=firstNonStopLowercase(i);const l=t.find("id");l.each((e,t)=>{$(t).html().match(/\d\d\d\d\.\d\d\d\d\d/g)&&(h=$(t).html().match(/\d\d\d\d\.\d\d\d\d\d/g)[0])});const c={key:a,title:i,author:s,year:o,id:h,pdfLink:n};let d=`@article{${a},\n`;return d+=`    title={${i}},\n`,d+=`    author={${s}},\n`,d+=`    year={${o}},\n`,d+=`    journal={arXiv preprint arXiv:${h}}\n`,d+="}",{bibvars:c,bibtext:d}},parseNeuripsHTML=(e,t)=>{const r=(new DOMParser).parseFromString(t.replaceAll("\n",""),"text/html"),a=$(r),n=a.find(".container-fluid .col p"),s=e.split("/").slice(-1)[0].replace("-Paper.pdf",""),i=a.find("h4").first().text(),o=$(n[1]).text().split(", ").map((e,t)=>{const r=e.split(" "),a=r.map((e,t)=>e.capitalize());return a.join(" ")}).join(" and "),h=e,l=$(n[0]).text().match(/\d{4}/)[0],c=`neurips${l}${s.slice(0,8)}`,d=`NeurIPS-${l}_${s.slice(0,8)}`,p=`\n@inproceedings{NEURIPS${l}_${s.slice(0,8)}\n    author = {${o}},\n    booktitle = {Advances in Neural Information Processing Systems},\n    editor = {H. Larochelle and M. Ranzato and R. Hadsell and M. F. Balcan and H. Lin},\n    publisher = {Curran Associates, Inc.},\n    title = {${i}},\n    url = {${e}},\n    year = {${l}}\n}`;return{key:c,title:i,author:o,year:l,id:d,pdfLink:h,bibtext:p}},fetchArxivBibtex=async e=>$.get(`https://export.arxiv.org/api/query?id_list=${e}`),fetchNeuripsHTML=async e=>{let t;return t=e.endsWith(".pdf")?e.replace("/file/","/hash/").replace("-Paper.pdf","-Abstract.html"):e,fetch(t).then(e=>e.text())},fetchCvfHTML=async e=>{let t,r;if(t=e.endsWith(".pdf")?e.replace("/papers/","/html/").replace(".pdf",".html"):e,r=await fetch(t).then(e=>e.ok?e.text():""),!r){const{conf:a,year:n}=parseCVFUrl(e);t=t.replace(`/content_${a}_${n}/`,`/content_${a.toLowerCase()}_${n}/`),r=await fetch(t).then(e=>e.ok?e.text():"")}return r},fetchOpts={headers:{mode:"no-cors"}},fetchPWCId=async(e,t)=>{let r="https://paperswithcode.com/api/v1/papers/?";e?r+=new URLSearchParams({arxiv_id:e}):t&&(r+=new URLSearchParams({title:t}));const a=await $.getJSON(r);if(console.log({json:a}),1===a.count)return a.results[0].id},fetchCodes=async e=>{let t,r;(e.source="neurips")?r=e.title:t=e.id;const a=await fetchPWCId(t,r);if(!a)return[];let n=`https://paperswithcode.com/api/v1/papers/${a}/repositories/?`;n+=new URLSearchParams({page:1,items_per_page:10});const s=await fetch(n),i=await s.json();if(i.count<1)return;let o=i.results;return o.sort((e,t)=>e.stars-t.stars),o.slice(0,5)};